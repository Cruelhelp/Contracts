<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoatMouth Equity Allocation Agreement – Extended Version</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">
    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.2.0/dist/signature_pad.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Crimson Text', serif;
            font-size: 12pt;
            line-height: 1.8;
            color: #000;
            background: #f5f5f5;
            padding: 40px 20px;
        }
        .page-container {
            max-width: 8.5in;
            margin: 0 auto;
            background: #fff;
            padding: 1in 1in 1in 1.25in;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            min-height: 11in;
            page-break-after: always;
        }
        .letterhead {
            text-align: center;
            margin-bottom: 0.5in;
            padding-bottom: 0.3in;
            border-bottom: 3px double #000;
        }
        .logo { max-height: 1.5in; margin-bottom: 0.2in; }
        .company-name {
            font-family: 'Libre Baskerville', serif;
            font-size: 24pt;
            font-weight: 700;
            letter-spacing: 2px;
            margin-bottom: 0.1in;
        }
        .company-type {
            font-size: 10pt;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        h1 {
            font-family: 'Libre Baskerville', serif;
            font-size: 18pt;
            font-weight: 700;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 0.4in 0;
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
            padding: 0.15in 0;
        }
        h2 {
            font-family: 'Libre Baskerville', serif;
            font-size: 14pt;
            font-weight: 700;
            margin-top: 0.4in;
            margin-bottom: 0.15in;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        p { text-align: justify; text-indent: 0.5in; margin-bottom: 0.15in; }
        p.no-indent { text-indent: 0; }
        ul, ol { margin-left: 0.75in; margin-bottom: 0.2in; }
        li { margin-bottom: 0.1in; text-align: justify; }
        strong { font-weight: 700; }
        .note-box {
            border: 2px solid #000;
            padding: 0.2in;
            margin: 0.3in 0;
            background: #f9f9f9;
        }
        .note-box p { text-indent: 0; font-size: 10pt; line-height: 1.6; }
        .signature-page { border-top: 3px double #000; padding-top: 0.3in; margin-top: 0.5in; }
        .signature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 0.4in;
            margin-top: 0.3in;
        }
        .sig-box {
            border: 2px solid #000;
            padding: 0.25in;
            background: #fafafa;
            page-break-inside: avoid;
        }
        .sig-header {
            font-family: 'Libre Baskerville', serif;
            font-size: 11pt;
            font-weight: 700;
            margin-bottom: 0.1in;
            padding-bottom: 0.05in;
            border-bottom: 1px solid #000;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .sig-role { font-size: 9pt; color: #555; margin-bottom: 0.15in; font-style: italic; }
        .name-input {
            width: 100%;
            padding: 8px;
            font-size: 11pt;
            font-family: 'Crimson Text', serif;
            border: 1px solid #000;
            margin-bottom: 0.15in;
            background: #fff;
        }
        .canvas-wrapper {
            position: relative;
            width: 100%;
            height: 1.2in;
            border: 1px solid #000;
            background: #fff;
            margin-bottom: 0.1in;
            cursor: crosshair;
        }
        .canvas-wrapper::before {
            content: "Sign here with mouse or touch";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ccc;
            font-size: 9pt;
            pointer-events: none;
            z-index: 0;
        }
        canvas {
            position: relative;
            width: 100%;
            height: 100%;
            touch-action: none;
            z-index: 1;
        }
        .sig-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 0.1in; }
        .sig-actions button {
            padding: 8px 16px;
            font-size: 9pt;
            font-weight: 600;
            font-family: 'Crimson Text', serif;
            border: 1px solid #000;
            background: #fff;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.2s;
        }
        .sig-actions button.save-sig { background: #000; color: #fff; }
        .sig-actions button.save-sig:hover { background: #333; }
        .sig-actions button.clear:hover { background: #e0e0e0; }
        .status-note { font-size: 9pt; margin-top: 8px; text-align: right; font-weight: 600; }
        .status-note.success { color: #006400; }
        .status-note.error { color: #8b0000; }
        .signed-preview { margin-top: 0.1in; padding: 0.1in; background: #fff; border: 1px solid #000; display: none; }
        .signed-preview img { max-height: 0.8in; border-bottom: 2px solid #000; margin-bottom: 8px; display: block; width: 100%; }
        .signed-info { font-size: 9pt; line-height: 1.4; }
        #download-btn {
            display: block;
            width: 100%;
            max-width: 4in;
            margin: 0.5in auto;
            padding: 0.15in;
            font-size: 12pt;
            font-weight: 700;
            font-family: 'Libre Baskerville', serif;
            background: #000;
            color: #fff;
            border: 2px solid #000;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s;
        }
        #download-btn:hover { background: #fff; color: #000; }
        #download-btn:disabled { background: #999; border-color: #999; cursor: not-allowed; }
        .instructions { text-align: center; font-size: 10pt; color: #555; margin: 0.3in 0; padding: 0.2in; border: 1px solid #ccc; background: #f9f9f9; line-height: 1.6; }
        .instructions strong { display: block; margin-bottom: 0.1in; color: #000; font-size: 11pt; }
        .document-footer { margin-top: 0.5in; padding-top: 0.2in; border-top: 1px solid #000; text-align: center; font-size: 8pt; color: #666; }
        @media screen and (max-width: 768px) {
            /* Reduce outer page padding for smaller screens */
            body { padding: 20px 10px; }
            /* Remove heavy shadows and shrink padding on page containers */
            .page-container { padding: 0.5in; box-shadow: none; }
            /* Adjust letterhead spacing */
            .letterhead { margin-bottom: 0.3in; padding-bottom: 0.2in; }
            /* Scale down title and heading sizes for better fit */
            h1 { font-size: 16pt; margin: 0.3in 0; }
            h2 { font-size: 12pt; margin-top: 0.25in; }
            /* Force signatures into a single column and reduce gaps */
            .signature-grid { grid-template-columns: 1fr; gap: 0.3in; }
        }
    </style>
</head>
<body>
    <!-- Page 1: Summary and Signatures -->
    <div class="page-container">
        <div class="letterhead">
            <img src="mainlogo.png" alt="GoatMouth Logo" class="logo">
            <div class="company-name">GOATMOUTH</div>
            <div class="company-type">Limited Liability Company</div>
        </div>
        <h1>Equity Allocation Agreement</h1>
        <p class="no-indent recitals"><strong>THIS EQUITY ALLOCATION AGREEMENT</strong> is made and entered into as of the date of last signature below (the "Effective Date"), by and among the undersigned parties (collectively, the "Parties").</p>
        <div class="article">
            <h2>Summary</h2>
            <p>This summary outlines the Parties involved and references additional pages for the full contract, supporting legal documents, and a platform overview.</p>
            <p>The Parties to this Agreement are:</p>
            <ul>
                <li><strong>Founder:</strong> Ruel McNeil</li>
                <li><strong>Team Member 1:</strong> Ineiko McBean</li>
                <li><strong>Team Member 2:</strong> Shaquille Simpson</li>
                <li><strong>Team Member 3:</strong> Darren Downer</li>
            </ul>
        </div>
        <div class="note-box">
            <p><strong>Important:</strong> The following signature page captures consent to the equity allocation described herein. See subsequent pages for the full contract text and additional legal information.</p>
        </div>
        <div class="signature-page">
            <h2>Signature Page</h2>
            <p class="no-indent" style="text-align: center;">IN WITNESS WHEREOF, the Parties have executed this Agreement as of the dates set forth below.</p>
            <div class="signature-grid">
                <!-- Founder -->
                <div class="sig-box">
                    <div class="sig-header">Ruel McNeil</div>
                    <div class="sig-role">Founder</div>
                    <input type="text" class="name-input" id="name-founder" placeholder="Type full legal name">
                    <div class="canvas-wrapper"><canvas id="canvas-founder"></canvas></div>
                    <div class="sig-actions">
                        <button class="save-sig" onclick="saveSignature('founder')">Save Signature</button>
                        <button class="clear" onclick="clearSignature('founder')">Clear</button>
                    </div>
                    <div class="status-note" id="status-founder"></div>
                    <div class="signed-preview" id="preview-founder">
                        <img id="preview-img-founder" alt="Signature">
                        <div class="signature-line"></div>
                        <div class="signed-info">
                            <strong id="preview-name-founder"></strong><br>
                            Date: <strong id="preview-date-founder"></strong>
                        </div>
                    </div>
                </div>
                <!-- Team Member 1 -->
                <div class="sig-box">
                    <div class="sig-header">Ineiko McBean</div>
                    <div class="sig-role">Team Member</div>
                    <input type="text" class="name-input" id="name-tm1" placeholder="Type full legal name">
                    <div class="canvas-wrapper"><canvas id="canvas-tm1"></canvas></div>
                    <div class="sig-actions">
                        <button class="save-sig" onclick="saveSignature('tm1')">Save Signature</button>
                        <button class="clear" onclick="clearSignature('tm1')">Clear</button>
                    </div>
                    <div class="status-note" id="status-tm1"></div>
                    <div class="signed-preview" id="preview-tm1">
                        <img id="preview-img-tm1" alt="Signature">
                        <div class="signature-line"></div>
                        <div class="signed-info">
                            <strong id="preview-name-tm1"></strong><br>
                            Date: <strong id="preview-date-tm1"></strong>
                        </div>
                    </div>
                </div>
                <!-- Team Member 2 -->
                <div class="sig-box">
                    <div class="sig-header">Shaquille Simpson</div>
                    <div class="sig-role">Team Member</div>
                    <input type="text" class="name-input" id="name-tm2" placeholder="Type full legal name">
                    <div class="canvas-wrapper"><canvas id="canvas-tm2"></canvas></div>
                    <div class="sig-actions">
                        <button class="save-sig" onclick="saveSignature('tm2')">Save Signature</button>
                        <button class="clear" onclick="clearSignature('tm2')">Clear</button>
                    </div>
                    <div class="status-note" id="status-tm2"></div>
                    <div class="signed-preview" id="preview-tm2">
                        <img id="preview-img-tm2" alt="Signature">
                        <div class="signature-line"></div>
                        <div class="signed-info">
                            <strong id="preview-name-tm2"></strong><br>
                            Date: <strong id="preview-date-tm2"></strong>
                        </div>
                    </div>
                </div>
                <!-- Team Member 3 -->
                <div class="sig-box">
                    <div class="sig-header">Darren Downer</div>
                    <div class="sig-role">Team Member</div>
                    <input type="text" class="name-input" id="name-tm3" placeholder="Type full legal name">
                    <div class="canvas-wrapper"><canvas id="canvas-tm3"></canvas></div>
                    <div class="sig-actions">
                        <button class="save-sig" onclick="saveSignature('tm3')">Save Signature</button>
                        <button class="clear" onclick="clearSignature('tm3')">Clear</button>
                    </div>
                    <div class="status-note" id="status-tm3"></div>
                    <div class="signed-preview" id="preview-tm3">
                        <img id="preview-img-tm3" alt="Signature">
                        <div class="signature-line"></div>
                        <div class="signed-info">
                            <strong id="preview-name-tm3"></strong><br>
                            Date: <strong id="preview-date-tm3"></strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="instructions">
            <strong>Signing Instructions</strong>
            1. Type your full legal name in the text field<br>
            2. Draw your signature using mouse or touch<br>
            3. Click "Save Signature" to timestamp and securely store<br>
            4. Once all parties have signed, download the final PDF
        </div>
        <button id="download-btn" onclick="downloadPDF()">Download Signed Agreement</button>
        <div class="document-footer">Page 1 of 4</div>
    </div>

    <!-- Page 2: Full Contract Placeholder -->
    <div class="page-container">
        <div class="letterhead">
            <img src="mainlogo.png" alt="GoatMouth Logo" class="logo">
            <div class="company-name">GOATMOUTH</div>
            <div class="company-type">Limited Liability Company</div>
        </div>
        <h1>Full Contract</h1>
        <p class="no-indent">This page is reserved for the complete, legally binding contract that governs the membership interests and operations of the Company. The full contract should include detailed provisions concerning governance, capital contributions, profit/loss allocations, management structure, dispute resolution, dissolution, and any other terms deemed necessary by the Parties. Please consult with qualified legal counsel to draft and review the full contract.</p>
        <p>Below is a placeholder for the contract text. Replace this text with the formal legal language of your agreement.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <div class="document-footer">Page 2 of 4</div>
    </div>

    <!-- Page 3: Additional Legal Documents -->
    <div class="page-container">
        <div class="letterhead">
            <img src="mainlogo.png" alt="GoatMouth Logo" class="logo">
            <div class="company-name">GOATMOUTH</div>
            <div class="company-type">Limited Liability Company</div>
        </div>
        <h1>Additional Legal Documents</h1>
        <p class="no-indent">This page is reserved for supplementary legal documents that may be relevant to the Parties, including but not limited to confidentiality agreements, intellectual property assignments, non-compete clauses, and any regulatory compliance materials. Insert your additional legal documentation here and ensure it is reviewed by legal counsel.</p>
        <p>Below is a placeholder for additional legal content.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <div class="document-footer">Page 3 of 4</div>
    </div>

    <!-- Page 4: GOATMOUTH Overview -->
    <div class="page-container">
        <div class="letterhead">
            <img src="mainlogo.png" alt="GoatMouth Logo" class="logo">
            <div class="company-name">GOATMOUTH</div>
            <div class="company-type">Limited Liability Company</div>
        </div>
        <h1>Platform Overview</h1>
        <h2>Overview</h2>
        <p>GOATMOUTH is a web‑based prediction market built specifically for Jamaicans. Users make predictions on real‑world events including local news, politics, sports, culture, and trends. Markets resolve based on real outcomes.</p>
        <h2>Technology</h2>
        <p>The platform uses a lightweight technology stack with no frameworks or blockchain dependencies:</p>
        <ul>
            <li>HTML</li>
            <li>CSS</li>
            <li>JavaScript</li>
            <li>Supabase (for backend services such as data storage and authentication)</li>
        </ul>
        <h2>Payments</h2>
        <p>Planned payment integrations include:</p>
        <ul>
            <li>Lynk</li>
            <li>WiPay</li>
            <li>Cryptocurrency</li>
        </ul>
        <p>All payments are designed to support Jamaican users first.</p>
        <h2>Status</h2>
        <p>GOATMOUTH is currently under active development.</p>
        <h2>Disclaimer</h2>
        <p>GOATMOUTH is a prediction platform and does not provide financial or investment advice.</p>
        <div class="document-footer">Page 4 of 4</div>
    </div>

    <script>
    // Supabase configuration
    const SUPABASE_URL = 'https://hvdivdqxsdhabeurwkfb.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2ZGl2ZHF4c2RoYWJldXJ3a2ZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NDkwNDIsImV4cCI6MjA4MTEyNTA0Mn0.h6WOImT19AyGZIrqeRZ1axkPJhftlZtW6HNKD5gRebI';
    const supabase = window.supabase ? window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY) : null;
    const { jsPDF } = window.jspdf;
    const pads = {};
    const roles = ['founder', 'tm1', 'tm2', 'tm3'];
    function formatDate(date) {
        return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) + ' at ' + date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
    }
    function initSignaturePad(role) {
        const canvas = document.getElementById(`canvas-${role}`);
        function resizeCanvas() {
            const ratio = Math.max(window.devicePixelRatio || 1, 1);
            const data = pads[role] && !pads[role].isEmpty() ? pads[role].toDataURL() : null;
            canvas.width = canvas.offsetWidth * ratio;
            canvas.height = canvas.offsetHeight * ratio;
            canvas.getContext('2d').scale(ratio, ratio);
            if (data) pads[role].fromDataURL(data);
        }
        pads[role] = new SignaturePad(canvas, {
            backgroundColor: 'rgb(255,255,255)',
            penColor: 'rgb(0,0,0)',
            minWidth: 0.3, // thinner lines
            maxWidth: 1.5,
            throttle: 16,
            minDistance: 5,
            velocityFilterWeight: 0.7
        });
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        return pads[role];
    }
    window.addEventListener('DOMContentLoaded', () => {
        roles.forEach(role => initSignaturePad(role));
        if (supabase) {
            roles.forEach(async role => {
                try {
                    const { data, error } = await supabase
                        .from('signatures')
                        .select('name, signature_data, signed_at')
                        .eq('role', role)
                        .maybeSingle();
                    if (data && !error) {
                        document.getElementById(`name-${role}`).value = data.name;
                        pads[role].fromDataURL(data.signature_data);
                        document.getElementById(`preview-img-${role}`).src = data.signature_data;
                        document.getElementById(`preview-name-${role}`).textContent = data.name;
                        document.getElementById(`preview-date-${role}`).textContent = formatDate(new Date(data.signed_at));
                        document.getElementById(`preview-${role}`).style.display = 'block';
                        document.getElementById(`name-${role}`).style.display = 'none';
                        document.querySelector(`#canvas-${role}`).parentElement.style.display = 'none';
                        document.querySelector(`#canvas-${role}`).closest('.sig-box').querySelector('.sig-actions').style.display = 'none';
                        document.getElementById(`status-${role}`).textContent = '\u2713 Signed and Saved';
                        document.getElementById(`status-${role}`).className = 'status-note success';
                    }
                } catch (err) {
                    console.error(`Error loading signature for ${role}:`, err);
                }
            });
        }
    });
    async function saveSignature(role) {
        const name = document.getElementById(`name-${role}`).value.trim();
        const statusEl = document.getElementById(`status-${role}`);
        statusEl.textContent = 'Saving...';
        statusEl.className = 'status-note';
        if (!name) {
            alert('Please type your full legal name.');
            statusEl.textContent = '';
            return;
        }
        if (pads[role].isEmpty()) {
            alert('Please draw your signature.');
            statusEl.textContent = '';
            return;
        }
        const signatureData = pads[role].toDataURL('image/png');
        const now = new Date().toISOString();
        if (!supabase) {
            document.getElementById(`preview-img-${role}`).src = signatureData;
            document.getElementById(`preview-name-${role}`).textContent = name;
            document.getElementById(`preview-date-${role}`).textContent = formatDate(new Date());
            document.getElementById(`preview-${role}`).style.display = 'block';
            document.getElementById(`name-${role}`).style.display = 'none';
            document.querySelector(`#canvas-${role}`).parentElement.style.display = 'none';
            document.querySelector(`#canvas-${role}`).closest('.sig-box').querySelector('.sig-actions').style.display = 'none';
            statusEl.textContent = '\u2713 Signature Captured Locally';
            statusEl.className = 'status-note success';
            return;
        }
        try {
            const { error } = await supabase
                .from('signatures')
                .upsert({ role, name, signature_data: signatureData, signed_at: now }, { onConflict: 'role', returning: 'minimal' });
            if (error) throw error;
            document.getElementById(`preview-img-${role}`).src = signatureData;
            document.getElementById(`preview-name-${role}`).textContent = name;
            document.getElementById(`preview-date-${role}`).textContent = formatDate(new Date());
            document.getElementById(`preview-${role}`).style.display = 'block';
            document.getElementById(`name-${role}`).style.display = 'none';
            document.querySelector(`#canvas-${role}`).parentElement.style.display = 'none';
            document.querySelector(`#canvas-${role}`).closest('.sig-box').querySelector('.sig-actions').style.display = 'none';
            statusEl.textContent = '\u2713 Signed and Saved Successfully';
            statusEl.className = 'status-note success';
        } catch (err) {
            console.error('Error saving signature:', err);
            statusEl.textContent = 'Error: ' + err.message;
            statusEl.className = 'status-note error';
        }
    }
    function clearSignature(role) {
        pads[role].clear();
        document.getElementById(`status-${role}`).textContent = '';
        document.getElementById(`status-${role}`).className = 'status-note';
    }
    async function downloadPDF() {
        const btn = document.getElementById('download-btn');
        btn.disabled = true;
        btn.textContent = 'Generating PDF...';
        try {
            // Capture each page and add to PDF
            const pdf = new jsPDF({ orientation: 'portrait', unit: 'in', format: 'letter' });
            const pages = document.querySelectorAll('.page-container');
            let first = true;
            for (const page of pages) {
                const canvas = await html2canvas(page, { scale: 2, useCORS: true, logging: false, backgroundColor: '#ffffff' });
                const imgData = canvas.toDataURL('image/png');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const ratio = Math.min(pdfWidth / canvas.width, pdfHeight / canvas.height);
                const imgX = (pdfWidth - canvas.width * ratio) / 2;
                const imgY = 0;
                if (!first) pdf.addPage();
                pdf.addImage(imgData, 'PNG', imgX, imgY, canvas.width * ratio, canvas.height * ratio);
                first = false;
            }
            const timestamp = new Date().toISOString().split('T')[0];
            pdf.save(`GoatMouth_Equity_Agreement_${timestamp}.pdf`);
            btn.disabled = false;
            btn.textContent = 'Download Signed Agreement';
        } catch (err) {
            console.error('Error generating PDF:', err);
            alert('Error generating PDF. Please try again.');
            btn.disabled = false;
            btn.textContent = 'Download Signed Agreement';
        }
    }
    </script>
</body>
</html>
